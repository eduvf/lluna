<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <title>lluna project &mdash; {{ page.title }}</title>

    <link rel="stylesheet" href="https://unpkg.com/sanitize.css" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@xz/fonts@1/serve/ibm-plex-mono.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@xz/fonts@1/serve/inter.min.css" />

    <link rel="stylesheet" href="assets/css/style.css" />
  </head>
  <body>
    <nav>
      {% for item in site.data.menu %}
      <a href="{{ item.url }}" class="{% if page.title == item.title %}current{% endif %}">
        <svg class="feather">
          <use href="assets/feather-sprite.svg#{{ item.icon }}" />
        </svg>
        <span>{{ item.title }}</span>
      </a>
      {% endfor %}
    </nav>

    {{ content }}

    <footer>
      Last updated: {{ site.time | date: '%Y %B %e' }}<br />
      By <a href="https://github.com/eduvf">EduVF</a>
    </footer>

    <script>
      // HIGHLIGHT LLUNA CODE

      // Style
      const STYLE = [
        // the 's' flag let's match across lines
        [/^,,,.*,,,/gs, "color: var(--purple-lighter)"],
        [/^,.*/g, "color: var(--purple-lighter); font-style: italic"],
        [/^'([^']|\\')*'/g, "font-style: italic"],
        [/^-?(\d+|\d*\.\d+)[\d\._]*/g, "font-weight: bold"],
        [/^[!#$%&*+\-\./:<=>?@\\^|~_]+/g, "font-weight: bold; color: var(--orange)"],
        [/^[a-z]\S+/g, ""],
      ];

      const preCollection = document.getElementsByTagName("pre");
      for (let pre of preCollection) {
        pre.innerHTML = highlight(pre.textContent);
      }

      function highlight(code) {
        let result = "";

        while (code.length > 0) {
          for (let t of STYLE) {
            let regex = t[0];
            let style = t[1];

            if ((found = regex.exec(code) !== null)) {
              let text = code.slice(0, regex.lastIndex);

              result += `<span style="${style}">${text}</span>`;
              console.log(text);

              code = code.slice(regex.lastIndex);
              regex.lastIndex = 0;
              break;
            }
          }
          result += code[0];
          code = code.slice(1);
        }

        return result;
      }
    </script>
  </body>
</html>
